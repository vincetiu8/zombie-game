Index: Assets/Scripts/Weapons/WeaponAttributes.cs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>using System;\r\nusing UnityEngine;\r\n\r\nnamespace Weapons\r\n{\r\n    public enum AmmoType : int { Primary, Heavy, Special }\r\n\r\n    [System.Serializable]\r\n    public struct AmmoEntry\r\n    {\r\n        public string name;\r\n        //name field included for editing convenience, not essential\r\n        public int maxCapacity;\r\n        public int currentStock;\r\n    }\r\n\r\n    [Serializable]\r\n    public struct WeaponAttributes\r\n    {\r\n        public string description;\r\n        public float damage;\r\n        public int magazineSize;\r\n        public float fireCooldown;\r\n        public float reloadTime;\r\n        public float bulletVelocity;\r\n\r\n        public override string ToString()\r\n        {\r\n            return $\"Damage: {damage}\\n\" \r\n                   + $\"Magazine Size: {magazineSize}\\n\"\r\n                   + $\"Fire Cooldown: {fireCooldown}\\n\"\r\n                   + $\"Reload Time: {reloadTime}\\n\"\r\n                   + $\"Bullet Velocity: {bulletVelocity}\\n\";\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Assets/Scripts/Weapons/WeaponAttributes.cs b/Assets/Scripts/Weapons/WeaponAttributes.cs
--- a/Assets/Scripts/Weapons/WeaponAttributes.cs	
+++ b/Assets/Scripts/Weapons/WeaponAttributes.cs	
@@ -8,8 +8,6 @@
     [System.Serializable]
     public struct AmmoEntry
     {
-        public string name;
-        //name field included for editing convenience, not essential
         public int maxCapacity;
         public int currentStock;
     }
Index: Assets/Scripts/Weapons/Gun.cs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>using System.Collections;\r\nusing Photon.Pun;\r\nusing UnityEngine;\r\n\r\nnamespace Weapons\r\n{\r\n    public class Gun : MonoBehaviourPun, IWeapon\r\n    {\r\n        [SerializeField] private string weaponName;\r\n        [SerializeField] private Transform firepoint;\r\n        [SerializeField] private GameObject bulletPrefab;\r\n        [SerializeField] private WeaponAttributes[] weaponLevels;\r\n        [SerializeField] private AmmoType ammoType;\r\n        //test comment\r\n        private int _currentLevel;\r\n        private int _bulletsInMagazine;\r\n        private float _fireCooldown;\r\n        private WeaponAttributes _currentAttributes;\r\n        private AmmoInventory ammo;\r\n        private Coroutine _reloadCoroutine;\r\n\r\n        private void Start()\r\n        {\r\n            _currentAttributes = weaponLevels[0];\r\n            _bulletsInMagazine = _currentAttributes.magazineSize;\r\n        }\r\n\r\n        private void Update()\r\n        {\r\n            if (!photonView.IsMine) return;\r\n            \r\n            if (_fireCooldown > 0)\r\n            {\r\n                _fireCooldown -= Time.deltaTime;\r\n            }\r\n        }\r\n\r\n        public void Upgrade()\r\n        {\r\n            if (_currentLevel + 1 <= weaponLevels.Length) return;\r\n\r\n            _currentLevel += 1;\r\n            _currentAttributes = weaponLevels[_currentLevel];\r\n        }\r\n\r\n        public void Fire()\r\n        {\r\n            if (_fireCooldown > 0 || _bulletsInMagazine < 1) return;\r\n\r\n            if (_reloadCoroutine != null)\r\n            {\r\n                StopCoroutine(_reloadCoroutine);\r\n            }\r\n            \r\n            GameObject bulletClone = PhotonNetwork.Instantiate(bulletPrefab.name, firepoint.position, firepoint.rotation);\r\n            Vector2 bulletVelocity = firepoint.right * _currentAttributes.bulletVelocity;\r\n            \r\n            bulletClone.GetComponent<Rigidbody2D>().velocity = bulletVelocity;\r\n            bulletClone.GetComponent<Bullet>().damage = _currentAttributes.damage;\r\n            \r\n\r\n            _bulletsInMagazine--;\r\n        }\r\n\r\n        public void Reload()\r\n        {\r\n            if (_reloadCoroutine != null) return;\r\n\r\n            _reloadCoroutine = StartCoroutine(ReloadCoroutine());\r\n        }\r\n        \r\n        private IEnumerator ReloadCoroutine()\r\n        {\r\n            yield return new WaitForSeconds(_currentAttributes.reloadTime);\r\n\r\n            _bulletsInMagazine = _currentAttributes.magazineSize;\r\n            int ammoStock = ammo.getAmmoStock(ammoType);\r\n            ammoStock -= _currentAttributes.magazineSize;\r\n            ammo.setAmmoStock(ammoType, ammoStock);\r\n        }\r\n\r\n        public override string ToString()\r\n        {\r\n            return $\"{weaponName} Level {_currentLevel} Stats:\\n{_currentAttributes}\";\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Assets/Scripts/Weapons/Gun.cs b/Assets/Scripts/Weapons/Gun.cs
--- a/Assets/Scripts/Weapons/Gun.cs	
+++ b/Assets/Scripts/Weapons/Gun.cs	
@@ -21,8 +21,10 @@
 
         private void Start()
         {
+            ammo = GetComponent<AmmoInventory>();
             _currentAttributes = weaponLevels[0];
             _bulletsInMagazine = _currentAttributes.magazineSize;
+            Debug.Log(ammo.GetAmmoStock(ammoType));
         }
 
         private void Update()
@@ -74,9 +76,9 @@
             yield return new WaitForSeconds(_currentAttributes.reloadTime);
 
             _bulletsInMagazine = _currentAttributes.magazineSize;
-            int ammoStock = ammo.getAmmoStock(ammoType);
+            int ammoStock = ammo.GetAmmoStock(ammoType);
             ammoStock -= _currentAttributes.magazineSize;
-            ammo.setAmmoStock(ammoType, ammoStock);
+            ammo.SetAmmoStock(ammoType, ammoStock);
         }
 
         public override string ToString()
Index: Assets/Resources/Weapon.prefab
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>%YAML 1.1\r\n%TAG !u! tag:unity3d.com,2011:\r\n--- !u!1 &4793649891906802130\r\nGameObject:\r\n  m_ObjectHideFlags: 0\r\n  m_CorrespondingSourceObject: {fileID: 0}\r\n  m_PrefabInstance: {fileID: 0}\r\n  m_PrefabAsset: {fileID: 0}\r\n  serializedVersion: 6\r\n  m_Component:\r\n  - component: {fileID: 894441089126901917}\r\n  - component: {fileID: 3909993537624026819}\r\n  - component: {fileID: 1201697913036177066}\r\n  - component: {fileID: 8110468372728126296}\r\n  - component: {fileID: -101671445424535207}\r\n  m_Layer: 3\r\n  m_Name: Weapon\r\n  m_TagString: Untagged\r\n  m_Icon: {fileID: 0}\r\n  m_NavMeshLayer: 0\r\n  m_StaticEditorFlags: 0\r\n  m_IsActive: 1\r\n--- !u!4 &894441089126901917\r\nTransform:\r\n  m_ObjectHideFlags: 0\r\n  m_CorrespondingSourceObject: {fileID: 0}\r\n  m_PrefabInstance: {fileID: 0}\r\n  m_PrefabAsset: {fileID: 0}\r\n  m_GameObject: {fileID: 4793649891906802130}\r\n  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}\r\n  m_LocalPosition: {x: 0, y: 0, z: 0}\r\n  m_LocalScale: {x: 0.91599154, y: 0.14061743, z: 1}\r\n  m_Children:\r\n  - {fileID: 6581261222417765288}\r\n  m_Father: {fileID: 0}\r\n  m_RootOrder: 0\r\n  m_LocalEulerAnglesHint: {x: 0, y: 0, z: 0}\r\n--- !u!212 &3909993537624026819\r\nSpriteRenderer:\r\n  m_ObjectHideFlags: 0\r\n  m_CorrespondingSourceObject: {fileID: 0}\r\n  m_PrefabInstance: {fileID: 0}\r\n  m_PrefabAsset: {fileID: 0}\r\n  m_GameObject: {fileID: 4793649891906802130}\r\n  m_Enabled: 1\r\n  m_CastShadows: 0\r\n  m_ReceiveShadows: 0\r\n  m_DynamicOccludee: 1\r\n  m_MotionVectors: 1\r\n  m_LightProbeUsage: 1\r\n  m_ReflectionProbeUsage: 1\r\n  m_RayTracingMode: 0\r\n  m_RayTraceProcedural: 0\r\n  m_RenderingLayerMask: 1\r\n  m_RendererPriority: 0\r\n  m_Materials:\r\n  - {fileID: 10754, guid: 0000000000000000f000000000000000, type: 0}\r\n  m_StaticBatchInfo:\r\n    firstSubMesh: 0\r\n    subMeshCount: 0\r\n  m_StaticBatchRoot: {fileID: 0}\r\n  m_ProbeAnchor: {fileID: 0}\r\n  m_LightProbeVolumeOverride: {fileID: 0}\r\n  m_ScaleInLightmap: 1\r\n  m_ReceiveGI: 1\r\n  m_PreserveUVs: 0\r\n  m_IgnoreNormalsForChartDetection: 0\r\n  m_ImportantGI: 0\r\n  m_StitchLightmapSeams: 1\r\n  m_SelectedEditorRenderState: 0\r\n  m_MinimumChartSize: 4\r\n  m_AutoUVMaxDistance: 0.5\r\n  m_AutoUVMaxAngle: 89\r\n  m_LightmapParameters: {fileID: 0}\r\n  m_SortingLayerID: 0\r\n  m_SortingLayer: 0\r\n  m_SortingOrder: 0\r\n  m_Sprite: {fileID: 7482667652216324306, guid: 48e93eef0688c4a259cb0eddcd8661f7,\r\n    type: 3}\r\n  m_Color: {r: 1, g: 1, b: 1, a: 1}\r\n  m_FlipX: 0\r\n  m_FlipY: 0\r\n  m_DrawMode: 0\r\n  m_Size: {x: 1, y: 1}\r\n  m_AdaptiveModeThreshold: 0.5\r\n  m_SpriteTileMode: 0\r\n  m_WasSpriteAssigned: 1\r\n  m_MaskInteraction: 0\r\n  m_SpriteSortPoint: 0\r\n--- !u!114 &1201697913036177066\r\nMonoBehaviour:\r\n  m_ObjectHideFlags: 0\r\n  m_CorrespondingSourceObject: {fileID: 0}\r\n  m_PrefabInstance: {fileID: 0}\r\n  m_PrefabAsset: {fileID: 0}\r\n  m_GameObject: {fileID: 4793649891906802130}\r\n  m_Enabled: 1\r\n  m_EditorHideFlags: 0\r\n  m_Script: {fileID: 11500000, guid: 10213a7e97c0496f881fedbc3b5d8c84, type: 3}\r\n  m_Name: \r\n  m_EditorClassIdentifier: \r\n  weaponName: Gun\r\n  firepoint: {fileID: 6581261222417765288}\r\n  bulletPrefab: {fileID: 5597441476687873508, guid: 7b55bd1d5c1b1f758997014851f9f8c5,\r\n    type: 3}\r\n  weaponLevels:\r\n  - description: Base level\r\n    damage: 0.2\r\n    magazineSize: 10\r\n    fireCooldown: 0.1\r\n    reloadTime: 1\r\n    bulletVelocity: 2\r\n  ammoType: 0\r\n--- !u!114 &8110468372728126296\r\nMonoBehaviour:\r\n  m_ObjectHideFlags: 0\r\n  m_CorrespondingSourceObject: {fileID: 0}\r\n  m_PrefabInstance: {fileID: 0}\r\n  m_PrefabAsset: {fileID: 0}\r\n  m_GameObject: {fileID: 4793649891906802130}\r\n  m_Enabled: 1\r\n  m_EditorHideFlags: 0\r\n  m_Script: {fileID: 11500000, guid: aa584fbee541324448dd18d8409c7a41, type: 3}\r\n  m_Name: \r\n  m_EditorClassIdentifier: \r\n  ObservedComponentsFoldoutOpen: 1\r\n  Group: 0\r\n  prefixField: -1\r\n  Synchronization: 3\r\n  OwnershipTransfer: 0\r\n  observableSearch: 2\r\n  ObservedComponents: []\r\n  sceneViewId: 0\r\n  InstantiationId: 0\r\n  isRuntimeInstantiated: 0\r\n--- !u!114 &-101671445424535207\r\nMonoBehaviour:\r\n  m_ObjectHideFlags: 0\r\n  m_CorrespondingSourceObject: {fileID: 0}\r\n  m_PrefabInstance: {fileID: 0}\r\n  m_PrefabAsset: {fileID: 0}\r\n  m_GameObject: {fileID: 4793649891906802130}\r\n  m_Enabled: 1\r\n  m_EditorHideFlags: 0\r\n  m_Script: {fileID: 11500000, guid: afd794169ec741e696a5d531c94c3bc2, type: 3}\r\n  m_Name: \r\n  m_EditorClassIdentifier: \r\n  _inventory:\r\n  - name: Primary\r\n    maxCapacity: 50\r\n    currentStock: 0\r\n  - name: Heavy\r\n    maxCapacity: 0\r\n    currentStock: 0\r\n  - name: Special\r\n    maxCapacity: 0\r\n    currentStock: 0\r\n--- !u!1 &9175378642531915954\r\nGameObject:\r\n  m_ObjectHideFlags: 0\r\n  m_CorrespondingSourceObject: {fileID: 0}\r\n  m_PrefabInstance: {fileID: 0}\r\n  m_PrefabAsset: {fileID: 0}\r\n  serializedVersion: 6\r\n  m_Component:\r\n  - component: {fileID: 6581261222417765288}\r\n  m_Layer: 3\r\n  m_Name: Firepoint\r\n  m_TagString: Untagged\r\n  m_Icon: {fileID: 0}\r\n  m_NavMeshLayer: 0\r\n  m_StaticEditorFlags: 0\r\n  m_IsActive: 1\r\n--- !u!4 &6581261222417765288\r\nTransform:\r\n  m_ObjectHideFlags: 0\r\n  m_CorrespondingSourceObject: {fileID: 0}\r\n  m_PrefabInstance: {fileID: 0}\r\n  m_PrefabAsset: {fileID: 0}\r\n  m_GameObject: {fileID: 9175378642531915954}\r\n  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}\r\n  m_LocalPosition: {x: 0.5, y: 0, z: 0}\r\n  m_LocalScale: {x: 1, y: 1, z: 1}\r\n  m_Children: []\r\n  m_Father: {fileID: 894441089126901917}\r\n  m_RootOrder: 0\r\n  m_LocalEulerAnglesHint: {x: 0, y: 0, z: 0}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Assets/Resources/Weapon.prefab b/Assets/Resources/Weapon.prefab
--- a/Assets/Resources/Weapon.prefab	
+++ b/Assets/Resources/Weapon.prefab	
@@ -146,14 +146,11 @@
   m_Name: 
   m_EditorClassIdentifier: 
   _inventory:
-  - name: Primary
-    maxCapacity: 50
+  - maxCapacity: 50
+    currentStock: 10
+  - maxCapacity: 0
     currentStock: 0
-  - name: Heavy
-    maxCapacity: 0
-    currentStock: 0
-  - name: Special
-    maxCapacity: 0
+  - maxCapacity: 0
     currentStock: 0
 --- !u!1 &9175378642531915954
 GameObject:
